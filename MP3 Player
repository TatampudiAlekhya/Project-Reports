from tkinter import *
import pygame
from tkinter import filedialog
root= Tk()
root.title('Mp3 Player')
root.iconbitmap('C:/Users/SAI TEJA')
root.geometry("500x400")
#Iitialize pygame Mixer
pygame.mixer.init()
#Add Song function
def add_song():
song= filedialog.askopenfilename(initialdir='audio/',title="choose a song", filetype=(("mp3 Files","*.mp3"),))
# removing the info and mp3 at the end
song= song.replace("C:/Users/SAI TEJA/audio", "")
song=song.replace(".mp3", "")
#Add song to listbox
song_box.insert(END, song)
#Add many songs
def add_many_songs():
songs= filedialog.askopenfilenames(initialdir='audio/',title="choose a song", filetype=(("mp3 Files","*.mp3"),))

#loop through song list and replace directory info and mp3
for song in songs:
song= song.replace("C:/Users/SAI TEJA/audio", "")
song=song.replace(".mp3", "")
#Insert into playlist
song_box.insert(END, song)
#For playing selected song
def play():
song=song_box.get(ACTIVE)
song=f'C:/Users/SAI TEJA/audio{song}.mp3'
#To play songs
pygame.mixer.music.load(song)
pygame.mixer.music.play(loops=0)
#for stop playing
def stop():
pygame.mixer.music.stop()
song_box.selection_clear(ACTIVE)
def next_song():
#get the current song tuple number
next_one = song_box.curselection()
#add one to the current song number
next_one = next_one[0]+1
#grab song title from playlist
song=song_box.get(next_one)
#add the directory structure and mp3 as we did in play function
song=f'C:/Users/SAI TEJA/audio{song}.mp3'
print(song)

pygame.mixer.music.load(song)
pygame.mixer.music.play(loops=0)
#clear move active bar in playlist
song_box.selection_clear(0, END)
#Activate new song bar
song_box.activate(next_one)
#Set active bar to next song
song_box.selection_set(next_one, last=None)
#play previous song in playlist
def previous_song():
#get the current song tuple number
next_one = song_box.curselection()
#add one to the current song number
next_one = next_one[0]-1
#grab song title from playlist
song=song_box.get(next_one)
#add the directory structure and mp3 as we did in play function
song=f'C:/Users/SAI TEJA/audio{song}.mp3'
print(song)
pygame.mixer.music.load(song)
pygame.mixer.music.play(loops=0)
#clear move active bar in playlist
song_box.selection_clear(0, END)
#Activate new song bar
song_box.activate(next_one)
#Set active bar to next song
song_box.selection_set(next_one, last=None)
#create global pause variable for using inside and outside of diff functions
global paused
paused = False
#for pausing we use pygame
def pause(is_paused):
global paused
paused= is_paused
if paused:
# Unpause
pygame.mixer.music.unpause()
paused= False
else:
#Pause
pygame.mixer.music.pause()
paused=True
#create a playlist Box by using tkinter widgets
#bg is background colour and fg is foreground for letters, selectbackground is selectingcolour and selectforeground is for text while selection
song_box=Listbox(root, bg="pink", fg="white", width=60, selectbackground="white", selectforeground="purple")
song_box.pack(pady=20)
# define player control button images
back_btn_img= PhotoImage(file='images/back2.png')
pause_btn_img= PhotoImage(file='images/pause3.png')
play_btn_img= PhotoImage(file='images/play4.png')
stop_btn_img= PhotoImage(file='images/stop5.png')
forward_btn_img= PhotoImage(file='images/forward2.png')
# create player control Frames to easily get centered(pack)
controls_frame = Frame(root)
controls_frame.pack()
# create player control Buttons
back_button=Button(controls_frame, image=back_btn_img, borderwidth=0, command=previous_song)
forward_button=Button(controls_frame, image=forward_btn_img, borderwidth=0, command=next_song)
pause_button=Button(controls_frame, image=pause_btn_img, borderwidth=0, command=lambda: pause(paused))
play_button=Button(controls_frame, image=play_btn_img, borderwidth=0, command=play)
stop_button=Button(controls_frame, image=stop_btn_img, borderwidth=0, command=stop)
back_button.grid(row=0, column=0, padx=10)
forward_button.grid(row=0, column=4, padx=10)
play_button.grid(row=0, column=2, padx=10)
pause_button.grid(row=0, column=1, padx=10)
stop_button.grid(row=0, column=3, padx=10)
#create Menu
my_menu = Menu(root)
root.config(menu=my_menu)
#Add song Menu
add_song_menu=Menu(my_menu)
my_menu.add_cascade(label="Add Songs", menu=add_song_menu)
add_song_menu.add_command(label="Add One Song to Playlist", command=add_song)
#Above we have add_song function we did not define so define at the top
#Add many songs to playlist
add_song_menu.add_command(label="Add many Songs to Playlist", command=add_many_songs)
#now again create add_many_songs function at top
root.mainloop()
